# 01. 개요

- 1.1 작업을 동시에 실행하는 일에 대한 (아주)간략한 역사
    - 여러 프로그램을 동시에 실행할 수 있는 운영체제를 개발하게 된 요인
        - 자원활용 : 프로그램은 입출력과 같이 외부 동작이 끝나기를 기다리는 동안 유용한 일을 처리하지 못함
        - 공정성 : 여러 사용자와 프로그램이 컴퓨터 내 자원에 대해 동일한 권한을 가질 수 있다.
        - 편의성 : 여러 작업을 전부 처리하는 프로그램 하나를 작서아는 것보다 각기 일을 하나씩 처리하고 필요 할 때 프로그램 간에 조율하는 프로그램을 여러개 작성하는 편이 더 쉽고 바람직함
    - 사람도 라면에 물을 올리고 끓기 전까지 티비를 본다는 등 여러 비동기 적으로 작업을 하므로 자원활용, 공정성, 편의성 등의 동기를 갖고 스레드가 고안됨.
    - 스레드는 다른 스레드와 상관없이 비동기적으로 실행되는데, 공유된 데이터를 접근하는 과정을 적절하게 동기화 하지 않으면 예상치 못한 결과를 얻을 수 있게 된다.
 
 - 1.2 스레드의 이점
    - 성능 향상, 쉬운 모델링, 명료한 코드, 자원활용도 와 처리율 증대 등등
    - 1.2.1 멀티프로세서 활용
        - 프로세서가 두 개인 시스템에서 스레드가 하나인 프로그램을 사용하면 CPU자원의 50%낭비
        - 프로세서가 많아질 경우 스레드 하나가 I/O가 끝나길 기다리는 동안 다른 스레드가 계속 실행될 수 있으므로  많은 스레드가 있을 시 CPU자원의 낭비도 줄이고, 처리속도도 높일 수 있다. 
    - 1.2.2 단순한 모델링
        - 복잡하면서 비동기적인 작업 흐름을 각기 별도 스레드에서 수행되는 더 단순하고 동기적인 작업 흐름 몇 개로 나눌 수 있음.
    - 1.2.3 단순한 비동기 이벤트 처리
        - 각 연결마다 스레드를 할당하고 동기 I/O를 사용하도록 하면 개발 작업이 쉬워짐
    - 1.2.4 더 빨리 반응하는 사용자 인터페이스 
        - 코드가 너무 오래 실행되면 다음 이벤트를 처리할 수 없어 멈춘것처럼 보이지만, 짧은 작업만 실행하면, 사용자 인터페이스 반응속도에는 별 영향이 없음.
        
 - 1.3 스레드 사용의 위험성
    - 자바 자체에 스레드 관련 기능이 내장되어 있어서 병렬 프로그램을 개발하기는 쉽지만 스레드 안정성에 대해 잘 알아야 한다.     
    - 1.3.1 안정성 위해 요소
        - 하나의 자원을 여러 스레드가 사용할 경우 하나씩 순차적으로 접근하면 문제가 안생기게지만, 동시에 접근하는 경우 자원의 결과앖이 예상과 다른 경우가 생길 가능성이 ㅇㅆ다.
        - 이럴 경우 동기화된 메소드를 만들면 문제가 해결된다.
        - 동기화를 하지 않으면 컴파일러, 하드웨어, 실행환경 각각에서 명령어의 실행 시점이나 실행 순서를 상당히 자유롭게 조정할 수 있지만, 프로그래머 입장에서는 최적화 작업 때문에 프로그램에 오류가 발생하지 않도록 스레드 간에 데이터가 공유되고 있는지를 명확하게 구분해야 하는 부담을 떠 않아야 한다.
        - 결국 동기화 하자.
    - 1.3.2 활동성 위험 
        - 동시 수행 코드를 개발할 대는 반드시 스레드 안정성 문제를 신경써야 한다.
        - 스레드 안정성문제가 생길 경우 데드락, 소모상태, 라이브락 같은 문제점이 생길 수 있다.
    - 1.3.3 성능 위험
        - 스레드를 사용하면 실행중에 어느정도 부하가 생긴다. 컨텍스트 스위칭이 빈번하고, 메모리를 읽고 쓰는데 있어 지역성이 손실되는 등 문제 바생, 그밖에도 버스에 동기화 관련 트래픽을 유발한다.
     
- 1.4 스레드는 어디에나
    - 모든 자바 프로그램은 기본적으로 스레드를 사용.
    - 컴포넌트는 언제나 프로그램 내부의 상태에 접근하기 때문에 해당 상태에 접근하는 모든 코드 경로에 해당하는 컴포넌트 역시 스레드 안전해야 한다.
    - 타이머, 서블릿과 jsp, 원격 메소드 호출, 스윙과 AWT등 어디에서나 스레드를 사용하며 스레드 안정성이 보장되어야 한다.
        
      
        